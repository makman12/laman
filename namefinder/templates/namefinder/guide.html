{% extends 'namefinder/base.html' %}
{% load static %}

{% block title %}User Guide - LAMAN{% endblock %}

{% block content %}
<div class="help-page">
    <div class="help-header">
        <h1>ğŸ“– User Guide</h1>
        <p>Learn how to use LAMAN to explore Hittite names, places, and deities</p>
    </div>

    <!-- Quick Links -->
    <div class="guide-cards">
        <a href="{% url 'namefinder:index' %}" class="guide-card">
            <div class="guide-card-icon">ğŸ”</div>
            <h3>Search Names</h3>
            <p>Find names using fuzzy matching and filters</p>
        </a>
        
        <a href="{% url 'namefinder:fragment_search' %}" class="guide-card">
            <div class="guide-card-icon">ğŸ“œ</div>
            <h3>Search Fragments</h3>
            <p>Find tablets by catalog number</p>
        </a>
        
        <a href="{% url 'namefinder:network' %}" class="guide-card">
            <div class="guide-card-icon">ğŸ•¸ï¸</div>
            <h3>Network View</h3>
            <p>Visualize name connections</p>
        </a>
        
        <a href="{% url 'namefinder:about' %}" class="guide-card">
            <div class="guide-card-icon">ğŸ“Š</div>
            <h3>Statistics</h3>
            <p>Database overview and counts</p>
        </a>
    </div>

    <!-- Search Examples Section -->
    <div class="help-section">
        <h2><span class="section-icon">ğŸ”</span> How Search Works</h2>
        <p>LAMAN uses <strong>fuzzy matching</strong> to find names even when you don't know the exact transliteration. The search is case-insensitive and handles common variations.</p>
        
        <h3>Example: Finding Kattaá¸«á¸«a</h3>
        <p>All of these searches will find <strong>Kattaá¸«á¸«a</strong>:</p>
        
        <div class="search-examples">
            <div class="search-example">
                <code>kataha</code>
                <span class="arrow">â†’</span>
                <span>Finds <strong>Kattaá¸«á¸«a</strong> (handles missing double consonants and special á¸«)</span>
            </div>
            <div class="search-example">
                <code>kadaha</code>
                <span class="arrow">â†’</span>
                <span>Finds <strong>Kattaá¸«á¸«a</strong> (d/t variation is handled)</span>
            </div>
            <div class="search-example">
                <code>kattahha</code>
                <span class="arrow">â†’</span>
                <span>Finds <strong>Kattaá¸«á¸«a</strong> (ASCII-friendly transliteration)</span>
            </div>
            <div class="search-example">
                <code>Kattaá¸«á¸«a</code>
                <span class="arrow">â†’</span>
                <span>Exact match with special characters</span>
            </div>
        </div>
    </div>

    <!-- Understanding Name Details -->
    <div class="help-section">
        <h2><span class="section-icon">ğŸ“</span> Understanding Name Details</h2>
        <p>When you click on a name, you'll see detailed information:</p>
        
        <div class="detail-explanation">
            <h3>ğŸ“Œ Name Types</h3>
            <ul>
                <li><span class="name-type-badge person">Person</span> - Personal names (anthroponyms)</li>
                <li><span class="name-type-badge place">Place</span> - Geographical names (toponyms)</li>
                <li><span class="name-type-badge deity">Deity</span> - Divine names (theonyms)</li>
            </ul>
            
            <h3>â†”ï¸ Correspondence & Variants</h3>
            <p><strong>Correspondence</strong> shows how a name appears in other writing systems or languages. For example, a Hittite name might correspond to a Hurrian or Akkadian form.</p>
            <p><strong>Variant Forms</strong> are different spellings of the same name within the Hittite corpus.</p>
            <p class="tip-box">ğŸ’¡ <strong>Tip:</strong> Searching for a correspondence or variant will also find the main name entry!</p>
            
            <h3>ğŸ“œ Attestations</h3>
            <p>Every occurrence of a name in cuneiform texts is recorded with:</p>
            <ul>
                <li><strong>Fragment:</strong> The tablet reference (e.g., KUB 1.1)</li>
                <li><strong>Line:</strong> Where in the text it appears</li>
                <li><strong>Spelling:</strong> The specific cuneiform spelling</li>
                <li><strong>TLH<sup>dig</sup>:</strong> Link to view the text online</li>
            </ul>
            
            <h3>ğŸ”— Co-occurring Names</h3>
            <p>This section shows <strong>other names that appear on the same tablets</strong>. This is useful for:</p>
            <ul>
                <li>Finding related individuals (family members, colleagues)</li>
                <li>Discovering social networks and relationships</li>
                <li>Understanding the context of a name</li>
            </ul>
            <p>Click the header to expand the list. Names are sorted by how often they co-occur with the current name.</p>
        </div>
    </div>

    <!-- Fragmentary Names Section -->
    <div class="help-section">
        <h2><span class="section-icon">â“</span> Fragmentary Attestations & "Unknown" Names</h2>
        <p>Some attestations in cuneiform texts are <strong>too fragmentary</strong> to identify with certainty. These present a special case in the database.</p>
        
        <div class="detail-explanation">
            <h3>What are fragmentary attestations?</h3>
            <p>When a name on a tablet is partially damaged or broken, it may match multiple possible names. For example, a spelling like <code>(Â°mÂ°)pÃ­-á¸«a-x-[</code> could belong to any name beginning with "Piha-" (such as Piá¸«aziti, Piá¸«awalwi, etc.).</p>
            
            <h3>How are they handled?</h3>
            <p>Fragmentary attestations that cannot be assigned to a specific name are linked to a placeholder entry called <strong>"Unknown"</strong>. This means:</p>
            <ul>
                <li>The attestation <strong>is preserved</strong> in the database</li>
                <li>It appears when you <strong>search for the fragment</strong> where it occurs</li>
                <li>It does <strong>not</strong> appear in name searches (e.g., searching "Piha" won't show fragmentary instances that might begin with Piha-)</li>
            </ul>
            
            <div class="example-box">
                <h4>ğŸ“‹ Example</h4>
                <p>In <a href="{% url 'namefinder:fragment_detail' 1241 %}">CHDS 2.128</a>, the spelling "<code>(Â°mÂ°)pÃ­-á¸«a-x-[</code>" is recorded as an attestation of "Unknown" because it could belong to any name starting with "Piha-".</p>
                <p>To find this attestation, you must search for the fragment (CHDS 2.128), not for "Piha" in the name search.</p>
            </div>
            
            <h3>Why this approach?</h3>
            <p>This ensures that:</p>
            <ul>
                <li><strong>No data is lost</strong> â€” all attestations are recorded</li>
                <li><strong>Search results stay accurate</strong> â€” uncertain readings don't clutter name searches</li>
                <li><strong>Fragments remain complete</strong> â€” you can still see all names (including fragmentary ones) on any given tablet</li>
            </ul>
        </div>
    </div>

    <!-- Using Regex -->
    <div class="help-section">
        <h2><span class="section-icon">ğŸ”¤</span> Advanced: Regex Search</h2>
        <p>Enable the <strong>Regex</strong> checkbox for powerful pattern matching:</p>
        
        <div class="search-examples">
            <div class="search-example">
                <code>^Katt</code>
                <span class="arrow">â†’</span>
                <span>Names <strong>starting with</strong> "Katt"</span>
            </div>
            <div class="search-example">
                <code>Å¡arri$</code>
                <span class="arrow">â†’</span>
                <span>Names <strong>ending with</strong> "Å¡arri"</span>
            </div>
            <div class="search-example">
                <code>á¸«.*ziti</code>
                <span class="arrow">â†’</span>
                <span>Names containing "á¸«" followed by "ziti"</span>
            </div>
            <div class="search-example">
                <code>^.{3,5}$</code>
                <span class="arrow">â†’</span>
                <span>Names with exactly 3-5 characters</span>
            </div>
        </div>
    </div>

    <!-- Filters -->
    <div class="help-section">
        <h2><span class="section-icon">ğŸ¯</span> Using Filters</h2>
        <p>Narrow down your search results using the filter dropdowns:</p>
        
        <ul>
            <li><strong>Name Type:</strong> Person, Place, or Deity</li>
            <li><strong>Writing Type:</strong> Syllabic (phonetic spelling) or Logographic (ideographic)</li>
            <li><strong>Completeness:</strong> Whether the name is completely preserved or fragmentary</li>
            <li><strong>Milieu:</strong> Cultural/linguistic background (Hittite, Hurrian, Luwian, etc.)</li>
        </ul>
        
        <p>Filters can be combined with search queries for precise results.</p>
    </div>

    <!-- Fragment Search -->
    <div class="help-section">
        <h2><span class="section-icon">ğŸ“œ</span> Fragment Search</h2>
        <p>Use the <strong>Search Fragments</strong> page to find tablets by their catalog number (e.g., KUB 1.1, KBo 4.2).</p>
        <p>Click on a fragment to see all names attested on that tablet, including fragmentary attestations linked to "Unknown".</p>
    </div>
</div>
{% endblock %}
